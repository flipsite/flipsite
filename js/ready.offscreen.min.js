ready(()=>{let e=document.querySelectorAll('[class*="offscreen:"]');if(!e)return;let t=e=>{let t=e.getAttribute("data-trigger");switch(t){case"parent":return"BODY"!==e.parentNode.tagName?e.parentNode:e;case"section":for(;"BODY"!==e.parentNode.tagName;)e=e.parentNode;return e;case"body":return document.body;default:return e}},r=e=>{let t={};for(let r=0;r<e.length;r++){let l=e[r],s=e.getPropertyValue(l);t[l]=s}return t},l=(e,t)=>{let r={},l=/^[0-9]+|^webkit/i,s=/^-?\d*(\.\d+)?$/;for(let a in e)if(!l.test(a)){let i=e[a],n=t[a];if(i!==n){if("transform"===a){let o=i.startsWith("matrix3d");r[a]=[i.slice(o?9:7,-1).split(", ").map(parseFloat),n.slice(o?9:7,-1).split(", ").map(parseFloat),]}else s.test(i)&&s.test(n)&&(r[a]=[parseFloat(i),parseFloat(n)])}}return r},s=[],a=[];e.forEach(e=>{let i=e.hasAttribute("data-scroll-transform"),n=[...e.classList].filter(e=>e.startsWith("offscreen")),o=e.getAttribute("data-event")||"enter";if(i){let f=r(window.getComputedStyle(e));e.classList.remove(...n);let d=r(window.getComputedStyle(e));"enter"===o&&e.classList.add(...n),a.push({el:e,ev:o,tr:t(e),sp:e.getAttribute("data-start")||"0%",ep:e.getAttribute("data-end")||"100%",di:"enter"===o?l(f,d):l(d,f),rp:e.hasAttribute("data-replay"),lp:0})}else"exit"===o&&e.classList.remove(...n),s.push({el:e,ev:o,tr:t(e),sp:e.getAttribute("data-start")||"0%",ep:e.getAttribute("data-end")||"100%",of:n,rp:e.hasAttribute("data-replay")})});let i=e=>{let t=0;do t+=parseInt(e.offsetTop),e=e.offsetParent;while(e);return t},n=(e,t,r,l)=>{r=-1!==r.indexOf("px")?parseFloat(r)/e.offsetHeight:parseFloat(r)/100,l=-1!==l.indexOf("px")?parseFloat(l)/e.offsetHeight:parseFloat(l)/100;let s=i(e);if("enter"===t){let a=window.innerHeight+window.scrollY-s,n=Math.min(a/e.clientHeight,1);return n<r?0:n>l?1:(n-r)/(l-r)}if("exit"!==t)return 1;{let o=window.scrollY-s,f=Math.min(o/e.clientHeight,1);return f<r?0:f>l?1:(f-r)/(l-r)}},o=(e,t,r)=>{for(let l in t){let s=t[l];if("transform"===l){let a=s[0].length>6;e.style.transform="matrix"+(a?"3d":"")+"("+s[0].map((e,t)=>e+(s[1][t]-e)*r).join(", ")+")"}else e.style[l]=s[0]+(s[1]-s[0])*r}},f=()=>{s.forEach(e=>{let t=n(e.tr,e.ev,e.sp,e.ep);t?("enter"===e.ev?e.el.classList.remove(...e.of):e.el.classList.add(...e.of),e.remove=!e.rp):e.rp&&("enter"===e.ev?e.el.classList.add(...e.of):e.el.classList.remove(...e.of))}),a.forEach(e=>{let t=n(e.tr,e.ev,e.sp,e.ep);(e.rp||!(t<e.lp))&&(!e.rp&&t>=1&&(e.remove=!0),o(e.el,e.di,t))}),s=s.filter(e=>!e.remove),a=a.filter(e=>!e.remove),s.length+a.length===0&&window.removeEventListener("scroll",f)};window.addEventListener("scroll",f),f()});