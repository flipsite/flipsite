function ScrollDots(t,e,s){this.observer=new IntersectionObserver((t,e)=>{t.forEach(t=>{t.isIntersecting&&((t=t.target).getAttribute("data-bg"),t.style.backgroundImage=t.getAttribute("data-bg"),t.removeAttribute("data-bg"),e.unobserve(t))})},{root:null,rootMargin:"0px",threshold:0}),this.selectedIndex=-1,this.visibleItems=-1,this.timeout=null,this.itemWidth=1,this.dots=t,this.target=s,this.itemsCount=s.children.length,this.backgrounds=e,this.dotTpl=t.children[0].cloneNode(),this.selectedClasses=[],this.notSelectedClasses=[];var i=this;this.dotTpl.getAttribute("data-selected").split(" ").forEach(t=>{(i.dotTpl.classList.contains(t)?i.notSelectedClasses:i.selectedClasses).push(t)}),this.dotTpl.removeAttribute("data-selected");for(let t=0;t<this.notSelectedClasses.length;t++)this.dotTpl.classList.remove(this.notSelectedClasses[t]);for(let t=0;t<this.selectedClasses.length;t++)this.dotTpl.classList.remove(this.selectedClasses[t]);this.handleResize(),this.setSelected(0,!1),this.target.onscroll=function(t){i.scrollDisabled||(t=Math.round(t.target.scrollLeft/(i.itemWidth*i.visibleItems)),i.setSelected(t,!1))}}ready(()=>{document.querySelectorAll("[data-dots]").forEach(t=>{t.removeAttribute("data-dots");var e=t.getAttribute("data-target"),s=t.hasAttribute("data-backgrounds")?JSON.parse(t.getAttribute("data-backgrounds")):[];t.removeAttribute("data-backgrounds");let i=new ScrollDots(t,s,document.getElementById(e));window.addEventListener("resize",function(){i.handleResize()})})}),ScrollDots.prototype.handleResize=function(){var t=this.countItemsInViewport();if(t!==this.visibleItems){for(this.visibleItems=t;this.dots.firstChild;)this.dots.removeChild(this.dots.firstChild);let e=this;var s=Math.ceil(this.itemsCount/this.visibleItems);for(let t=0;t<s;t++){var i=this.dotTpl.cloneNode();void 0!==this.backgrounds[t]&&i.setAttribute("data-bg","url("+this.backgrounds[t]+")"),i.onclick=function(){e.setSelected(t,!0),e.scrollDisabled=!0,clearTimeout(e.timeout),e.timeout=setTimeout(function(){e.scrollDisabled=!1},1e3)},this.dots.append(i),this.observer.observe(i)}this.selectedIndex=-1,this.setSelected(0,!0)}},ScrollDots.prototype.setSelected=function(s,t){if(this.selectedIndex!==s){t&&this.target.scrollTo(s*this.target.offsetWidth,0);for(let t=0;t<this.dots.children.length;t++){let e=this.dots.children[t];var i=s===t;this.selectedClasses.concat(this.notSelectedClasses).forEach(function(t){e.classList.remove(t)}),(i?this.selectedClasses:this.notSelectedClasses).forEach(function(t){e.classList.add(t)}),this.selectedIndex=s}}},ScrollDots.prototype.countItemsInViewport=function(){return this.itemWidth=this.target.children[0].clientWidth,Math.round(this.target.offsetWidth/this.itemWidth)};