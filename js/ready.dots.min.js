function ScrollDots(t,e,s){this.selectedIndex=-1,this.visibleItems=-1,this.timeout=null,this.itemWidth=1,this.dots=t,this.target=s,this.itemsCount=s.children.length,this.backgrounds=e,this.dotTpl=t.children[0].cloneNode(),this.selectedClasses=[],this.notSelectedClasses=[];var i=this;this.dotTpl.getAttribute("data-selected").split(" ").forEach(t=>{i.dotTpl.classList.contains(t)?i.notSelectedClasses.push(t):i.selectedClasses.push(t)}),this.dotTpl.removeAttribute("data-selected");for(let l=0;l<this.notSelectedClasses.length;l++)this.dotTpl.classList.remove(this.notSelectedClasses[l]);for(let o=0;o<this.selectedClasses.length;o++)this.dotTpl.classList.remove(this.selectedClasses[o]);this.handleResize(),this.setSelected(0,!1),this.target.onscroll=function(t){if(i.scrollDisabled)return;let e=Math.round(t.target.scrollLeft/(i.itemWidth*i.visibleItems));i.setSelected(e,!1)}}ready(()=>{document.querySelectorAll("[data-dots]").forEach(t=>{t.removeAttribute("data-dots");let e=t.getAttribute("data-target"),s=JSON.parse(t.getAttribute("data-backgrounds")||"");t.removeAttribute("data-backgrounds");let i=new ScrollDots(t,s,document.getElementById(e));window.addEventListener("resize",function(){i.handleResize()})})}),ScrollDots.prototype.handleResize=function(){let t=this.countItemsInViewport();if(t===this.visibleItems)return;for(this.visibleItems=t;this.dots.firstChild;)this.dots.removeChild(this.dots.firstChild);let e=this,s=Math.ceil(this.itemsCount/this.visibleItems);for(let i=0;i<s;i++){let l=this.dotTpl.cloneNode();void 0!==this.backgrounds[i]&&(l.style.backgroundImage="url("+this.backgrounds[i]+")"),l.onclick=function(){e.setSelected(i,!0),e.scrollDisabled=!0,clearTimeout(e.timeout),e.timeout=setTimeout(function(){e.scrollDisabled=!1},1e3)},this.dots.append(l)}this.selectedIndex=-1,this.setSelected(0,!0)},ScrollDots.prototype.setSelected=function(t,e){if(this.selectedIndex!==t){e&&this.target.scrollTo(t*this.target.offsetWidth,0);for(let s=0;s<this.dots.children.length;s++){let i=this.dots.children[s],l=t===s;this.selectedClasses.concat(this.notSelectedClasses).forEach(function(t){i.classList.remove(t)});let o=l?this.selectedClasses:this.notSelectedClasses;o.forEach(function(t){i.classList.add(t)}),this.selectedIndex=t}}},ScrollDots.prototype.countItemsInViewport=function(){return this.itemWidth=this.target.children[0].clientWidth,Math.round(this.target.offsetWidth/this.itemWidth)};
