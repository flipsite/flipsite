ready(()=>{let t=document.querySelectorAll('[class*="offscreen:"]');if(!t)return;let e=t=>{let e=t.getAttribute("data-trigger");switch(e){case"parent":return"BODY"!==t.parentNode.tagName?t.parentNode:t;case"section":for(;"BODY"!==t.parentNode.tagName;)t=t.parentNode;return t;default:return t}},r=t=>{let e={};for(let r=0;r<t.length;r++){let l=t[r],s=t.getPropertyValue(l);e[l]=s}return e},l=(t,e)=>{let r={},l=/^[0-9]+|^webkit/i,s=/^-?\d*(\.\d+)?$/;for(let a in t)if(!l.test(a)){let i=t[a],o=e[a];if(i!==o){if("transform"===a){let n=i.startsWith("matrix3d");r[a]=[i.slice(n?9:7,-1).split(", ").map(parseFloat),o.slice(n?9:7,-1).split(", ").map(parseFloat),]}else s.test(i)&&s.test(o)&&(r[a]=[parseFloat(i),parseFloat(o)])}}return r},s=[],a=[];t.forEach(t=>{let i=t.hasAttribute("data-scroll-transform"),o=[...t.classList].filter(t=>t.startsWith("offscreen"));if(i){let n=r(window.getComputedStyle(t));t.classList.remove(...o);let p=r(window.getComputedStyle(t));t.classList.add(...o),console.log(n.transform),a.push({el:t,tr:e(t),sp:parseFloat(t.getAttribute("data-start")||0)/100,ep:parseFloat(t.getAttribute("data-end")||100)/100,di:l(n,p),rp:t.hasAttribute("data-replay"),lp:0})}else s.push({el:t,tr:e(t),sp:parseFloat(t.getAttribute("data-start")||0)/100,ep:parseFloat(t.getAttribute("data-end")||100)/100,of:o,rp:t.hasAttribute("data-replay")})});let i=t=>{let e=0;do e+=t.offsetTop,t=t.offsetParent;while(t);return e},o=(t,e,r)=>{t.getBoundingClientRect();let l=window.innerHeight+window.scrollY-i(t),s=Math.min(l/t.clientHeight,1);return s<e?0:s>r?1:(s-e)/(r-e)},n=(t,e,r)=>{for(let l in e){let s=e[l];if("transform"===l){let a=s[0].length>6;t.style.transform="matrix"+(a?"3d":"")+"("+s[0].map((t,e)=>t+(s[1][e]-t)*r).join(", ")+")"}else t.style[l]=s[0]+(s[1]-s[0])*r}},p=()=>{var t;s.forEach(t=>{let e=o(t.tr,t.sp,t.ep);e?(t.el.classList.remove(...t.of),t.remove=!t.rp):t.rp&&t.el.classList.add(...t.of)}),a.forEach(t=>{let e=o(t.tr,t.sp,t.ep);(t.rp||!(e<t.lp))&&(!t.rp&&e>=1&&(t.remove=!0),n(t.el,t.di,e))}),s=s.filter(t=>!t.remove),a=a.filter(t=>!t.remove),s.length+a.length===0&&window.removeEventListener("scroll",p)};window.addEventListener("scroll",p),p()});